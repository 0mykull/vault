{% set shade = note.color if note.color else 'slate' %}
<div id="note-card-{{ note.id }}" class="note-card rounded-3xl border border-white/10 bg-slate-950/50 px-5 py-4 shadow-[0_20px_50px_rgba(0,0,0,0.35)]">
  <div class="flex items-center justify-between text-xs text-slate-400">
    <span class="inline-flex items-center gap-2">
      <span class="h-2 w-2 rounded-full bg-{{ shade }}-400"></span>
      {{ note.updated_at.strftime('%b %d · %I:%M %p') }}
    </span>
    {% if note.pinned %}
    <span class="text-amber-300 inline-flex items-center gap-1">
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M15 3.75A2.25 2.25 0 0 1 17.25 6v2.4a3 3 0 0 1-.799 2.025l-.451.49v3.585l.97.97a.75.75 0 0 1-.53 1.28h-4.88a.75.75 0 0 1-.53-1.28l.97-.97v-3.585l-.45-.49A3 3 0 0 1 8.25 8.4V6A2.25 2.25 0 0 1 10.5 3.75Z"/>
      </svg>
      Pinned
    </span>
    {% endif %}
  </div>
  <div class="mt-3 space-y-2">
    <h3 class="text-lg font-semibold text-white">{{ note.title or 'Untitled note' }}</h3>
    <p class="text-sm text-slate-200 whitespace-pre-wrap leading-relaxed">{{ (note.content or '…') | e }}</p>
    {% if note.tag_list %}
    <div class="flex flex-wrap gap-2 text-xs text-slate-400">
      {% for tag in note.tag_list %}
      <span class="rounded-full bg-white/5 border border-white/10 px-3 py-1">#{{ tag }}</span>
      {% endfor %}
    </div>
    {% endif %}
  </div>
  <div class="mt-4 flex flex-wrap items-center justify-between gap-3 text-xs text-slate-400">
    <div class="flex gap-3">
      <button class="hover:text-white transition" hx-post="/notes/{{ note.id }}/toggle-pin" hx-target="#notes-grid" hx-swap="outerHTML">{{ 'Unpin' if note.pinned else 'Pin' }}</button>
      <button class="hover:text-white transition" hx-get="/notes/{{ note.id }}/edit" hx-target="#note-card-{{ note.id }}" hx-swap="outerHTML">Edit</button>
      <button class="hover:text-rose-300 transition" hx-post="/notes/{{ note.id }}/delete" hx-target="#notes-grid" hx-swap="outerHTML" hx-confirm="Delete this note?">Delete</button>
    </div>
    <span class="text-slate-500">#{{ note.id }}</span>
  </div>
</div>
